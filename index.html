<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CoinView</title>
  <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: Arial, sans-serif; background-color: #1a1a1a; color: white; }
    nav ul { list-style: none; display: flex; justify-content: center; gap: 15px; padding: 10px; }
    nav ul li a { font-weight: bold; cursor: pointer; text-decoration: none; color: #26a69a; }
    .tab-content { display: none; padding: 20px; }
    .tab-content.active { display: block; }

    .container { padding: 10px; max-width: 100%; margin: 0 auto; }
    h1 { font-size: 24px; padding: 10px; }
    #chart-container { width: 100%; height: 400px; background-color: #000; margin-bottom: 15px; }
    .controls { display: flex; flex-direction: column; gap: 15px; padding: 10px; }
    .panel { background-color: #2a2a2a; padding: 15px; border-radius: 5px; width: 100%; min-width: 250px; }
    input, select { background-color: #333; border: 1px solid #444; color: white; padding: 8px; border-radius: 4px; width: 100%; }
    button { background-color: #26a69a; color: white; border: none; padding: 10px; border-radius: 4px; cursor: pointer; font-size: 16px; }
    button:hover { background-color: #2bbbad; }
    
    /* Responsive Design */
    @media (min-width: 768px) {
      .controls { flex-direction: row; flex-wrap: wrap; }
      .panel { flex: 1; min-width: 300px; }
      h1 { font-size: 28px; }
      #chart-container { height: 500px; }
    }
  </style>
</head>
<body>
  <nav>
    <ul>
      <li><a href="#manualTradeRender" class="tab-link">Manual</a></li>
      <li><a href="#replayTradeRender" class="tab-link">Replay</a></li>
      <li><a href="#botTradeRender" class="tab-link">Bot</a></li>
    </ul>
  </nav>

  <!-- Manual Trade Render Tab Content -->
  <div id="manualTradeRender" class="tab-content active">
    <div class="container">
      <h1>CoinView - Manual Trading</h1>
      <div id="chart-container"></div>
      
      <div class="controls">
        <div class="panel buy-crypto">
          <h3>Buy Crypto</h3>
          <div class="buy-crypto-form">
            <input type="number" id="amount" placeholder="e.g., 0.001" step="0.001" min="0">
            <select id="pair"><option value="BTCUSD">BTCUSD</option></select>
            <button id="buy">Buy</button>
          </div>
        </div>
        <div class="panel settings">
          <h3>Settings</h3>
          <div class="settings-grid">
            <div class="settings-group">
              <input type="checkbox" id="rsi-toggle">
              <label for="rsi-toggle">RSI</label>
              <input type="text" id="rsi" value="14">
            </div>
            <div class="settings-group">
              <label for="overbought">Overbought</label>
              <input type="text" id="overbought" value="70">
            </div>
            <div class="settings-group">
              <label for="oversold">Oversold</label>
              <input type="text" id="oversold" value="30">
            </div>
          </div>
        </div>
        <div class="panel balances">
          <h3>Balances</h3>
          <p>BTC: <span id="btc-balance">0.00517500</span></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Replay Trade Render Tab Content -->
  <div id="replayTradeRender" class="tab-content">
    <div class="container">
      <h1>CoinView - Replay Trading</h1>
      <!-- Replay trade content can go here -->
      <p>Replay trading tools will be available here.</p>
    </div>
  </div>

  <!-- Bot Trade Render Tab Content -->
  <div id="botTradeRender" class="tab-content">
    <div class="container">
      <h1>CoinView - Bot Trading</h1>
      <!-- Bot trade content can go here -->
      <p>Automated bot trading settings and tools will be available here.</p>
    </div>
  </div>

  <script type="module">
    let candlestickSeries, chart;
    const updateInterval = 60000; // 1 minute
    let lastPrice = 100;

    function resizeChart() {
      const container = document.getElementById('chart-container');
      if (chart) {
        chart.applyOptions({
          width: container.clientWidth,
          height: container.clientHeight
        });
      }
    }

    function initChart() {
      chart = LightweightCharts.createChart(document.getElementById('chart-container'), {
        layout: { background: { color: '#000' }, textColor: '#fff' },
        grid: { vertLines: { color: '#404040' }, horzLines: { color: '#404040' } },
        timeScale: { timeVisible: true, secondsVisible: true, borderColor: '#444' },
        rightPriceScale: { borderColor: '#444' },
        crosshair: { mode: LightweightCharts.CrosshairMode.Normal }
      });
      candlestickSeries = chart.addCandlestickSeries({
        upColor: '#26a69a', downColor: '#ef5350', borderVisible: false,
        wickUpColor: '#26a69a', wickDownColor: '#ef5350'
      });
      const initialData = [];
      for (let i = 0; i < 100; i++) {
        const time = Math.floor(Date.now() / 1000) - (100 - i) * 60;
        initialData.push({ time: time, open: lastPrice, high: lastPrice + Math.random() * 2, low: lastPrice - Math.random() * 2, close: lastPrice + (Math.random() - 0.5) * 4 });
        lastPrice += (Math.random() - 0.5) * 2;
      }
      candlestickSeries.setData(initialData);
    }

    function updateChart() {
      const data = { time: Math.floor(Date.now() / 1000), open: lastPrice, high: lastPrice + Math.random() * 2, low: lastPrice - Math.random() * 2, close: lastPrice + (Math.random() - 0.5) * 4 };
      candlestickSeries.update(data);
      lastPrice = data.close;
    }

    initChart();
    window.addEventListener('resize', resizeChart);
    setInterval(updateChart, updateInterval);
    
    document.getElementById('buy').addEventListener('click', () => {
      const amount = document.getElementById('amount').value;
      const pair = document.getElementById('pair').value;
      console.log(`Buying ${amount} ${pair}`);
    });

    document.querySelectorAll('.tab-link').forEach(link => {
      link.addEventListener('click', event => {
        event.preventDefault();
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.querySelector(link.getAttribute('href')).classList.add('active');
      });
    });
  </script>
</body>
</html>
